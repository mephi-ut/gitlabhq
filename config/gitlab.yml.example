# # # # # # # # # # # # # # # # # # 
# GitLab application config file  #
# # # # # # # # # # # # # # # # # #
#
# How to use:
# 1. copy file as gitlab.yml
# 2. Replace gitlab -> host with your domain
# 3. Replace gitlab -> email_from

production: &base
  #
  # 1. GitLab app settings
  # ==========================

  ## GitLab settings
  gitlab:
    ## Web server settings
    host: localhost
    port: 80
    https: false
    # Uncomment and customize to run in non-root path
    # Note that ENV['RAILS_RELATIVE_URL_ROOT'] in config/unicorn.rb may need to be changed
    # relative_url_root: /gitlab

    # Uncomment and customize if you can't use the default user to run GitLab (default: 'git')
    # user: git

    ## Email settings
    # Email address used in the "From" field in mails sent by GitLab
    email_from: gitlab@localhost

    # Email address of your support contact (default: same as email_from)
    support_email: support@localhost

    ## Project settings
    default_projects_limit: 10
    # signup_enabled: true          # default: false - Account passwords are not sent via the email if signup is enabled.
    # username_changing_enabled: false # default: true - User can change her username/namespace


  ## External issues trackers
  issues_tracker:
    # redmine:
    #   ## If not nil, link 'Issues' on project page will be replaced with this
    #   ## Use placeholders:
    #   ##  :project_id        - GitLab project identifier
    #   ##  :issues_tracker_id - Project Name or Id in external issue tracker
    #   project_url: "http://redmine.sample/projects/:issues_tracker_id"
    #   ## If not nil, links from /#\d/ entities from commit messages will replaced with this
    #   ## Use placeholders:
    #   ##  :project_id        - GitLab project identifier
    #   ##  :issues_tracker_id - Project Name or Id in external issue tracker
    #   ##  :id                - Issue id (from commit messages)
    #   issues_url: "http://redmine.sample/issues/:id"

  ## Gravatar
  gravatar:
    enabled: true                 # Use user avatar image from Gravatar.com (default: true)
    # plain_url: "http://..."     # default: http://www.gravatar.com/avatar/%{hash}?s=%{size}&d=mm
    # ssl_url:   "https://..."    # default: https://secure.gravatar.com/avatar/%{hash}?s=%{size}&d=mm



  #
  # 2. Auth settings
  # ==========================

  ## OmniAuth settings
  omniauth:
    # CAUTION!
    # This allows users to login without having a user account first (default: false).
    # User accounts will be created automatically when authentication was successful.
    # NOTE: You may add this option for any provider too, to overwrite this option for that provider
    allow_single_sign_on: false
    # Locks down those users until they have been cleared by the admin (default: true).
    # NOTE: You may add this option for any provider too, to overwrite this option for that provider
    block_auto_created_users: true

    ## Auth providers
    # Enable any of following and fill in the data of the auth provider you want to use
    # If your favorite auth provider is not listed you can use others:
    # see https://github.com/gitlabhq/gitlabhq/wiki/Using-Custom-Omniauth-Providers
    # The 'app_id' and 'app_secret' parameters are always passed as the first two
    # arguments (if present). Others are given as Hash.

    # Option 'enabled'      -> Is this provider enabled? (default: true)
    # Option 'label'        -> What is this provider called? (default: provider's name)
    # Option 'title'        -> What is title of this provider (default: '%{label} Sign in')
    # Option 'email_domain' -> If provider do not provide email it will be generated by "%{nickname}@%{email_domain}" (default: null)
    # Option 'login_form':  -> Tells how login form is show. (for default check 'app_*' options)
    #   * false -> show as icon (eg. twitter, github, etc)
    #   * true  -> show login dialog (eg. ldap)
    #   * Hash  -> you can give more complex definitions:
    #     * always_show: false|true  -> Is form shown even when other form is selected (default: false)
    #     * fields: Hash|true|false  -> What form fields to use (default: true)
    #       * true  -> use fields: {username: '%label Login'. password: '*Password'} (ldap, pam)
    #       * false -> do not show any fields (shibboleth, cas)
    #       * Hash  -> You may define fields your self. key will be field name and value the placeholder
    #                  Asterisk (*) in start of value will make field a password field (asterisk is removed in progress).
    #                  %label or %title will be replaced by that
    # If options 'app_id', 'app_secret' are present 'login_form' defaults to false, else to true
    # Other options are passed to packend as is
    providers:
      google_oauth2:
        enabled: false
        app_id: 'YOUR APP ID'
        app_secret: 'YOUR APP SECRET'
        access_type: 'offline'
        approval_prompt: ''

      twitter:
        enabled: false
        app_id: 'YOUR APP ID'
        app_secret: 'YOUR APP SECRET'

      github:
        enabled: false
        app_id: 'YOUR APP ID'
        app_secret: 'YOUR APP SECRET'

      ldap:
        enabled: false
        label: 'MyCorporation'
        # For gitlab 4.2 style login (only when only ldap is enabled), uncomment following
        #login_form:
        #  always_show: true
        host: '_your_ldap_server'
        base: '_the_base_where_you_search_for_users'
        port: 636 # 389 for tls and plain
        uid: 'sAMAccountName'
        method: 'ssl' # "ssl", "tls" or "plain"
        bind_dn: '_the_full_dn_of_the_user_you_will_bind_with'
        password: '_the_password_of_the_bind_user'
        # For authentication to work as you expect, uncomment these
        #allow_single_sign_on: true
        #block_auto_created_users: false



  #
  # 3. Advanced settings
  # ==========================

  # GitLab Satellites
  satellites:
    # Relative paths are relative to Rails.root (default: tmp/repo_satellites/)
    path: /home/git/gitlab-satellites/

  ## Backup settings
  backup:
    path: "tmp/backups"   # Relative paths are relative to Rails.root (default: tmp/backups/)
    # keep_time: 604800   # default: 0 (forever) (in seconds)

  ## GitLab Shell settings
  gitlab_shell:
    # REPOS_PATH MUST NOT BE A SYMLINK!!!
    repos_path: /home/git/repositories/
    hooks_path: /home/git/gitlab-shell/hooks/

    # Git over HTTP
    upload_pack: true
    receive_pack: true

    # If you use non-standard ssh port you need to specify it
    # ssh_port: 22

  ## Git settings
  # CAUTION!
  # Use the default values unless you really know what you are doing
  git:
    bin_path: /usr/bin/git
    # Max size of a git object (e.g. a commit), in bytes
    # This value can be increased if you have very large commits
    max_size: 5242880 # 5.megabytes
    # Git timeout to read a commit, in seconds
    timeout: 10

development:
  <<: *base

test:
  <<: *base
  issues_tracker:
    redmine:
      project_url: "http://redmine/projects/:issues_tracker_id"
      issues_url: "http://redmine/:project_id/:issues_tracker_id/:id"

staging:
  <<: *base
